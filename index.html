<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>êµìœ¡í›ˆë ¨ ì ìˆ˜ ì¢…í•© ì‹œìŠ¤í…œ</title>
    <style>
        :root { 
            --primary: #2c3e50; 
            --accent: #27ae60; 
            --bg-color: #f1f3f5;
            --disabled: #e9ecef;
            --danger: #e74c3c;
            --gold: #f39c12;
            --active-row: #f0f9ff;
        }

        html, body { 
            margin: 0; padding: 0; width: 100%; overflow-x: hidden; 
            font-family: 'Pretendard', -apple-system, sans-serif; 
            background-color: var(--bg-color); color: var(--primary);
            display: flex; flex-direction: column; min-height: 100vh;
        }

        .container { 
            width: 95%; max-width: 720px; margin: 15px auto; 
            background: white; border-radius: 20px; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            flex: 1; box-sizing: border-box;
        }

        .top-header {
            padding: 25px 12px; border-bottom: 2px solid #f8f9fa;
            display: flex; flex-direction: column; align-items: center;
        }

        .title-area {
            display: flex; align-items: center; gap: 10px; margin-bottom: 20px;
            width: 100%; justify-content: center;
        }

        .top-logo {
            width: 55px; height: 55px;
            background-image: url('background.jpg');
            background-size: cover; background-position: center;
            border-radius: 12px; border: 1px solid #ddd; flex-shrink: 0;
        }

        h1 { 
            margin: 0; font-size: 2.1rem; font-weight: 900; 
            letter-spacing: -1.5px; color: #1a202c; white-space: nowrap;
        }

        .result-summary { 
            width: 100%; max-width: 400px; background: var(--primary);
            padding: 20px; border-radius: 16px; color: white; text-align: center;
            box-sizing: border-box;
        }
        .total-label { font-size: 0.9rem; opacity: 0.8; margin-bottom: 5px; }
        .total-score { font-size: 3.8rem; font-weight: 900; color: #2ecc71; margin: 0; line-height: 1; }
        
        /* ì§„í–‰ ë°” ë””ìì¸ */
        .progress-container {
            width: 100%; background: rgba(255,255,255,0.2); 
            height: 8px; border-radius: 10px; margin-top: 15px; overflow: hidden;
        }
        .progress-bar {
            width: 0%; height: 100%; background: #2ecc71; 
            transition: width 0.5s ease;
        }

        .content-area { padding: 20px 8px; box-sizing: border-box; }
        
        .swipe-notice {
            display: flex; align-items: center; justify-content: center;
            font-size: 0.85rem; color: #3498db; font-weight: 600;
            margin-bottom: 10px; animation: shakeHint 2s ease-in-out infinite;
        }

        @keyframes shakeHint {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50% { transform: translateX(-5px); }
            20%, 40% { transform: translateX(5px); }
        }

        .table-wrapper { 
            width: 100%; overflow-x: auto; -webkit-overflow-scrolling: touch;
            border: 1px solid #eee; border-radius: 14px; background: #fff;
        }

        table { width: 100%; border-collapse: collapse; min-width: 520px; }
        th { background: #fbfbfc; padding: 15px 5px; font-size: 0.85rem; font-weight: 600; border-bottom: 2px solid #edf2f7; color: #64748b; }
        td { padding: 12px 4px; border-bottom: 1px solid #f1f5f9; text-align: center; transition: background 0.3s; }
        
        /* ì ìˆ˜ ì…ë ¥ëœ í–‰ ê°•ì¡° */
        tr.active-row td { background-color: var(--active-row); }

        .score-input, .grade-select { 
            height: 46px; padding: 0 8px; border: 2px solid #e2e8f0; 
            border-radius: 10px; text-align: center; font-size: 0.95rem;
            box-sizing: border-box; transition: all 0.2s ease;
        }

        .score-input { width: 75px; }
        .grade-select { width: 110px; background-color: #fff; cursor: pointer; }

        /* ë“±ê¸‰ ë°°ì§€ ìŠ¤íƒ€ì¼ (ì „ë¬¸ê°€ìš© ì»¬ëŸ¬ë§) */
        .grade-badge { 
            display: inline-block; padding: 5px 10px; border-radius: 6px; 
            font-weight: 800; color: white; font-size: 0.8rem; background: #94a3b8;
        }
        .grade-íŠ¹ê¸‰ { background-color: var(--gold); box-shadow: 0 2px 5px rgba(243,156,18,0.3); }
        .grade-3ê¸‰ë¯¸ë§Œ, .grade-ë¶ˆí•©ê²© { background-color: var(--danger); }
        .grade-1ê¸‰, .grade-2ê¸‰, .grade-3ê¸‰ { background-color: #34495e; }

        .point-display { font-weight: 800; color: #f39c12; font-size: 1.15rem; }
        
        .info-card { 
            margin-top: 15px; padding: 18px; background: #f8fafc;
            border: 1px solid #e2e8f0; color: #475569; border-radius: 14px;
            font-size: 0.9rem; line-height: 1.7; box-sizing: border-box;
        }

        footer {
            text-align: center; padding: 25px; font-size: 0.85rem;
            color: #94a3b8; background: #f1f5f9; width: 100%; box-sizing: border-box;
        }

        .no-input-text { color: #2980b9; font-size: 0.8rem; font-weight: 700; }

        @media (max-width: 400px) {
            h1 { font-size: 1.8rem; }
            .total-score { font-size: 3.2rem; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="top-header">
        <div class="title-area">
            <div class="top-logo"></div>
            <h1>êµìœ¡í›ˆë ¨ ì ìˆ˜ ì¢…í•©</h1>
        </div>
        
        <div class="result-summary">
            <div class="total-label">í™˜ì‚° ì ìˆ˜ ì´í•©</div>
            <div id="totalDisplay" class="total-score">0.00</div>
            <div class="progress-container">
                <div id="progressBar" class="progress-bar"></div>
            </div>
        </div>
    </div>

    <div class="content-area">
        <div class="swipe-notice">
            <span>â—€ í‘œë¥¼ ì¢Œìš°ë¡œ ë°€ì–´ë³´ì„¸ìš” â–¶</span>
        </div>

        <div class="table-wrapper">
            <table>
                <thead>
                    <tr>
                        <th style="width: 20%;">ê³¼ëª©ëª…</th>
                        <th style="width: 22%;">ì ìˆ˜ ì…ë ¥</th>
                        <th style="width: 23%;">ë“±ê¸‰ ì„ íƒ</th>
                        <th style="width: 15%;">íŒì •</th>
                        <th style="width: 20%;">í™˜ì‚°ì ìˆ˜</th>
                    </tr>
                </thead>
                <tbody id="scoreTableBody"></tbody>
            </table>
        </div>

        <div class="info-card">
            <strong>ğŸ’¡ ì‚¬ìš© íŒ</strong><br>
            â€¢ ê³¼ëª©ë³„ <b>ì ìˆ˜ ë˜ëŠ” ë“±ê¸‰</b>ì„ ì…ë ¥í•˜ë©´ ê¸°ì¤€í‘œì— ë”°ë¥¸ <b>í™˜ì‚°ì ìˆ˜</b>ê°€ ìë™ìœ¼ë¡œ ê³„ì‚°ë©ë‹ˆë‹¤.<br>
            â€¢ <b>ê¸°ì´ˆì²´ë ¥</b>ì€ ì ìˆ˜ê°€ ì•„ë‹Œ <b>ë“±ê¸‰</b>ì„ ì§ì ‘ ì„ íƒí•´ì•¼ ì ìˆ˜ê°€ ë°˜ì˜ë©ë‹ˆë‹¤.<br>
            â€¢ ì‚¬ê²©ì€ íšë“í•œ <b>ë°œìˆ˜(0~20)</b>ë¥¼, ê¸°íƒ€ ê³¼ëª©ì€ <b>ì ìˆ˜(0~100)</b>ë¥¼ ì…ë ¥í•˜ì„¸ìš”.
        </div>
    </div>
</div>

<footer>
    ë¬¸ì˜ : êµ­êµ°ìˆ˜ì†¡ì‚¬ë ¹ë¶€ êµìœ¡ì¥êµ
</footer>

<script>
    const scoreData = {
        "ì •ì‹ ì „ë ¥": { "íŠ¹ê¸‰": 10, "1ê¸‰": 9.29, "2ê¸‰": 8.58, "3ê¸‰": 7.15, "3ê¸‰ ë¯¸ë§Œ": 5.72, "ë¶ˆí•©ê²©": 4.29 },
        "ê¸°ì´ˆì²´ë ¥": { "íŠ¹ê¸‰": 10, "1ê¸‰": 9.29, "2ê¸‰": 8.58, "3ê¸‰": 7.15, "3ê¸‰ ë¯¸ë§Œ": 5.72, "ë¶ˆí•©ê²©": 4.29 },
        "ì‚¬ê²©": { "íŠ¹ê¸‰": 10, "1ê¸‰": 9.29, "2ê¸‰": 8.58, "3ê¸‰": 7.15, "3ê¸‰ ë¯¸ë§Œ": 5.72, "ë¶ˆí•©ê²©": 4.29 },
        "í•µ ë° í™”ìƒë°©": { "íŠ¹ê¸‰": 5, "1ê¸‰": 4.65, "2ê¸‰": 4.29, "3ê¸‰": 3.58, "3ê¸‰ ë¯¸ë§Œ": 2.56, "ë¶ˆí•©ê²©": 2.15 },
        "TCCC": { "íŠ¹ê¸‰": 5, "1ê¸‰": 4.65, "2ê¸‰": 4.29, "3ê¸‰": 3.58, "3ê¸‰ ë¯¸ë§Œ": 2.56, "ë¶ˆí•©ê²©": 2.15 },
        "ì£¼íŠ¹ê¸°": { "íŠ¹ê¸‰": 30, "1ê¸‰": 27.86, "2ê¸‰": 25.72, "3ê¸‰": 21.43, "3ê¸‰ ë¯¸ë§Œ": 17.15, "ë¶ˆí•©ê²©": 12.86 }
    };

    const subjects = Object.keys(scoreData);

    function init() {
        const tbody = document.getElementById('scoreTableBody');
        subjects.forEach((sub, idx) => {
            const row = document.createElement('tr');
            row.id = `row_${idx}`;
            const isPhysical = sub === "ê¸°ì´ˆì²´ë ¥";
            const placeholderText = sub === "ì‚¬ê²©" ? "0-20" : "0-100";
            
            const inputHtml = isPhysical 
                ? `<span class="no-input-text">ë“±ê¸‰ì„ ê³ ë¥´ì„¸ìš”</span>` 
                : `<input type="number" class="score-input" id="input_${idx}" placeholder="${placeholderText}" oninput="handleInput(${idx})">`;
            
            row.innerHTML = `
                <td><span class="subject-name">${sub}</span></td>
                <td>${inputHtml}</td>
                <td>
                    <select class="grade-select" id="select_${idx}" onchange="handleSelect(${idx})">
                        <option value="">ë“±ê¸‰ ì„ íƒ</option>
                        <option value="íŠ¹ê¸‰">íŠ¹ê¸‰</option>
                        <option value="1ê¸‰">1ê¸‰</option>
                        <option value="2ê¸‰">2ê¸‰</option>
                        <option value="3ê¸‰">3ê¸‰</option>
                        <option value="3ê¸‰ ë¯¸ë§Œ">3ê¸‰ ë¯¸ë§Œ</option>
                        <option value="ë¶ˆí•©ê²©">ë¶ˆí•©ê²©</option>
                    </select>
                </td>
                <td><span class="display-grade" id="grade_${idx}">-</span></td>
                <td><span class="display-point" id="point_${idx}">0.00</span></td>
            `;
            tbody.appendChild(row);
        });
    }

    window.handleInput = function(idx) {
        const inputEl = document.getElementById(`input_${idx}`);
        const selectEl = document.getElementById(`select_${idx}`);
        if (!inputEl) return;
        
        if (inputEl.value !== "") {
            selectEl.disabled = true;
            let grade = "";
            const val = parseFloat(inputEl.value);
            const subName = subjects[idx];
            
            if (subName === "ì‚¬ê²©") {
                if (val >= 18) grade = "íŠ¹ê¸‰";
                else if (val >= 16) grade = "1ê¸‰";
                else if (val >= 14) grade = "2ê¸‰";
                else if (val >= 12) grade = "3ê¸‰";
                else if (val >= 1) grade = "3ê¸‰ ë¯¸ë§Œ";
                else grade = "ë¶ˆí•©ê²©";
            } else {
                if (val >= 90) grade = "íŠ¹ê¸‰";
                else if (val >= 80) grade = "1ê¸‰";
                else if (val >= 70) grade = "2ê¸‰";
                else if (val >= 60) grade = "3ê¸‰";
                else if (val > 0) grade = "3ê¸‰ ë¯¸ë§Œ";
                else grade = "ë¶ˆí•©ê²©";
            }
            applyResult(idx, grade);
        } else {
            selectEl.disabled = false;
            applyResult(idx, "");
        }
    }

    window.handleSelect = function(idx) {
        const inputEl = document.getElementById(`input_${idx}`);
        const selectEl = document.getElementById(`select_${idx}`);
        
        if (selectEl.value !== "") {
            if(inputEl) inputEl.disabled = true;
            applyResult(idx, selectEl.value);
        } else {
            if(inputEl) inputEl.disabled = false;
            applyResult(idx, "");
        }
    }

    function applyResult(idx, grade) {
        const subName = subjects[idx];
        const row = document.getElementById(`row_${idx}`);
        const point = grade ? scoreData[subName][grade] : 0;
        
        // ë°°ì§€ í´ë˜ìŠ¤ ì²˜ë¦¬
        const cleanGrade = grade.replace(" ", ""); // '3ê¸‰ ë¯¸ë§Œ' -> '3ê¸‰ë¯¸ë§Œ'
        const badgeHtml = grade ? `<span class="grade-badge grade-${cleanGrade}">${grade}</span>` : "-";
        
        document.getElementById(`grade_${idx}`).innerHTML = badgeHtml;
        document.getElementById(`point_${idx}`).innerText = point.toFixed(2);
        
        // í–‰ í™œì„±í™” ê°•ì¡°
        if (grade) row.classList.add('active-row');
        else row.classList.remove('active-row');
        
        calculateTotal();
    }

    function calculateTotal() {
        let total = 0;
        document.querySelectorAll('.display-point').forEach(p => {
            total += parseFloat(p.innerText);
        });
        document.getElementById('totalDisplay').innerText = total.toFixed(2);
        
        // ì§„í–‰ ë°” ì—…ë°ì´íŠ¸ (ë§Œì  70ì  ê¸°ì¤€)
        const percent = (total / 70) * 100;
        document.getElementById('progressBar').style.width = Math.min(percent, 100) + "%";
    }

    window.onload = init;
</script>
</body>
</html>
